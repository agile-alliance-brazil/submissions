- title @session.title
- show_actions!

.commentAnchor= link_to "#{@session.comments_count} #{t('title.comments')}", "#comments"

%ul.piped
  %li= link_to h(@session.author.full_name), user_path(@session.author)
  - if @session.second_author
    %li= link_to h(@session.second_author.full_name), user_path(@session.second_author)
  - if can? :update, @session
    %li= link_to t('title.edit_session'), edit_session_path(@conference, @session)
  - if can? :cancel, @session
    %li= link_to t('title.cancel_session'), cancel_session_path(@conference, @session), method: :delete, data: { confirm: I18n.t('generic.are_you_sure', action: I18n.t('title.cancel_session')) }
  %li #{t('formtastic.labels.session.updated_at')}: #{l(@session.updated_at, format: :short)}

%ul.spaced
  %li.first #{t('session.parameters')}:
  - if @conference.tracks.size > 1
    %li= link_to t(@session.track.title), conference_tracks_path(@conference)
  - if @conference.audience_levels.size > 1
    %li= link_to t(@session.audience_level.title), conference_audience_levels_path(@conference)
  - if @conference.session_types.size > 1
    %li= link_to t(@session.session_type.title), conference_session_types_path(@conference)
  %li
    &= @session.try(:duration_mins)
    = t('generic.minutes')
  - unless @session.audience_limit.blank?
    %li= t('session.audience_limit', limit: @session.audience_limit)

%ul.spaced
  %li.first #{t('formtastic.labels.session.keyword_list')}:
  - @session.keyword_list.each do |keyword|
    %li= link_to h(t(keyword)), sessions_path(@conference, session_filter: {tags: keyword})

= content_tag_for(:dl, @session) do
  - unless @session.language.blank?
    %dt= t('formtastic.labels.session.language')
    %dd= t("generic.#{@session.language}")
  %dt= t('formtastic.labels.session.prerequisites')
  %dd&= @session.try(:prerequisites)
  %dt= t('formtastic.labels.session.summary')
  %dd= textilize(@session.try(:summary))
  %dt= t('formtastic.labels.session.description')
  %dd= textilize(@session.try(:description))
  - unless @session.mechanics.blank?
    %dt= t('formtastic.labels.session.mechanics')
    %dd= textilize(@session.mechanics)
  %dt= t('formtastic.labels.session.target_audience')
  %dd&= @session.try(:target_audience)
  %dt= t('formtastic.labels.session.benefits')
  %dd= textilize(@session.try(:benefits))
  %dt= t('formtastic.labels.session.experience')
  %dd= textilize(@session.try(:experience))
  %dt= t('formtastic.labels.session.video_link')
  - video_link = @session.try(:video_link)
  %dd= video_link.blank? ? '' : link_to(video_link, video_link)
  - if @session.try(:first_presentation)
    %dt= t('formtastic.labels.session.first_presentation')
    %dt= t('formtastic.labels.session.presentation_justification')
    %dd= textilize(@session.try(:presentation_justification))
  %dt= t('formtastic.labels.session.additional_links')
  %dd= textilize(@session.try(:additional_links))

%hr

%a{name: 'comments'}
= render 'comments/new'